(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{250:function(t,e,c){"use strict";var n=c(0),b=c(251),r=c(252);function o(t,e,c){const n=t.slice();return n[7]=e[c],n}function s(t){let e,c;const o=new b.a({props:{icon:r.a}});return{c(){e=Object(n.v)("a"),Object(n.q)(o.$$.fragment),this.h()},l(t){e=Object(n.l)(t,"A",{href:!0,class:!0});var c=Object(n.j)(e);Object(n.k)(o.$$.fragment,c),c.forEach(n.u),this.h()},h(){Object(n.f)(e,"href",t[0]),Object(n.f)(e,"class","mr-2")},m(t,b){Object(n.G)(t,e,b),Object(n.J)(o,e,null),c=!0},p(t,b){(!c||1&b)&&Object(n.f)(e,"href",t[0])},i(t){c||(Object(n.ab)(o.$$.fragment,t),c=!0)},o(t){Object(n.bb)(o.$$.fragment,t),c=!1},d(t){t&&Object(n.u)(e),Object(n.s)(o)}}}function l(t){let e,c,o;const s=new b.a({props:{icon:r.e}});return{c(){e=Object(n.v)("button"),Object(n.q)(s.$$.fragment),this.h()},l(t){e=Object(n.l)(t,"BUTTON",{class:!0});var c=Object(n.j)(e);Object(n.k)(s.$$.fragment,c),c.forEach(n.u),this.h()},h(){Object(n.f)(e,"class","px-2")},m(b,r,l){Object(n.G)(b,e,r),Object(n.J)(s,e,null),c=!0,l&&o(),o=Object(n.I)(e,"click",t[5])},p:n.K,i(t){c||(Object(n.ab)(s.$$.fragment,t),c=!0)},o(t){Object(n.bb)(s.$$.fragment,t),c=!1},d(t){t&&Object(n.u)(e),Object(n.s)(s),o()}}}function a(t){let e,c,b,r=t[1],s=[];for(let e=0;e<r.length;e+=1)s[e]=i(o(t,r,e));return{c(){e=Object(n.v)("div"),c=Object(n.v)("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=Object(n.l)(t,"DIV",{class:!0});var b=Object(n.j)(e);c=Object(n.l)(b,"DIV",{class:!0});var r=Object(n.j)(c);for(let t=0;t<s.length;t+=1)s[t].l(r);r.forEach(n.u),b.forEach(n.u),this.h()},h(){Object(n.f)(c,"class","absolute right-0 mx-2 mt-10 py-1 w-40 bg-grey-700 text-white\n      rounded shadow-xl"),Object(n.f)(e,"class","absolute w-full h-full bg-transparent")},m(r,o,l){Object(n.G)(r,e,o),Object(n.d)(e,c);for(let t=0;t<s.length;t+=1)s[t].m(c,null);l&&b(),b=Object(n.I)(e,"click",t[6])},p(t,e){if(2&e){let n;for(r=t[1],n=0;n<r.length;n+=1){const b=o(t,r,n);s[n]?s[n].p(b,e):(s[n]=i(b),s[n].c(),s[n].m(c,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},d(t){t&&Object(n.u)(e),Object(n.t)(s,t),b()}}}function i(t){let e,c,b,r,o=t[7].title+"";return{c(){e=Object(n.v)("a"),c=Object(n.Z)(o),b=Object(n.W)(),this.h()},l(t){e=Object(n.l)(t,"A",{href:!0,class:!0});var r=Object(n.j)(e);c=Object(n.n)(r,o),b=Object(n.m)(r),r.forEach(n.u),this.h()},h(){Object(n.f)(e,"href",r=t[7].url),Object(n.f)(e,"class","block px-3 py-1 text-gray-800")},m(t,r){Object(n.G)(t,e,r),Object(n.d)(e,c),Object(n.d)(e,b)},p(t,b){2&b&&o!==(o=t[7].title+"")&&Object(n.S)(c,o),2&b&&r!==(r=t[7].url)&&Object(n.f)(e,"href",r)},d(t){t&&Object(n.u)(e)}}}function j(t){let e,c,b,r,o,i,j=t[0]&&s(t);const O=t[4].default,u=Object(n.r)(O,t,t[3],null),f=u||function(t){let e;return{c(){e=Object(n.v)("div"),this.h()},l(t){e=Object(n.l)(t,"DIV",{class:!0}),Object(n.j)(e).forEach(n.u),this.h()},h(){Object(n.f)(e,"class","flex-grow")},m(t,c){Object(n.G)(t,e,c)},d(t){t&&Object(n.u)(e)}}}();let d=t[1]&&l(t),m=t[2]&&a(t);return{c(){e=Object(n.v)("header"),j&&j.c(),c=Object(n.W)(),f&&f.c(),b=Object(n.W)(),d&&d.c(),r=Object(n.W)(),m&&m.c(),o=Object(n.w)(),this.h()},l(t){e=Object(n.l)(t,"HEADER",{class:!0});var s=Object(n.j)(e);j&&j.l(s),c=Object(n.m)(s),f&&f.l(s),b=Object(n.m)(s),d&&d.l(s),s.forEach(n.u),r=Object(n.m)(t),m&&m.l(t),o=Object(n.w)(),this.h()},h(){Object(n.f)(e,"class","p-3 bg-grey-800 flex items-center text-white")},m(t,s){Object(n.G)(t,e,s),j&&j.m(e,null),Object(n.d)(e,c),f&&f.m(e,null),Object(n.d)(e,b),d&&d.m(e,null),Object(n.G)(t,r,s),m&&m.m(t,s),Object(n.G)(t,o,s),i=!0},p(t,[b]){t[0]?j?(j.p(t,b),Object(n.ab)(j,1)):(j=s(t),j.c(),Object(n.ab)(j,1),j.m(e,c)):j&&(Object(n.E)(),Object(n.bb)(j,1,1,()=>{j=null}),Object(n.i)()),u&&u.p&&8&b&&u.p(Object(n.A)(O,t,t[3],null),Object(n.z)(O,t[3],b,null)),t[1]?d?(d.p(t,b),Object(n.ab)(d,1)):(d=l(t),d.c(),Object(n.ab)(d,1),d.m(e,null)):d&&(Object(n.E)(),Object(n.bb)(d,1,1,()=>{d=null}),Object(n.i)()),t[2]?m?m.p(t,b):(m=a(t),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i(t){i||(Object(n.ab)(j),Object(n.ab)(f,t),Object(n.ab)(d),i=!0)},o(t){Object(n.bb)(j),Object(n.bb)(f,t),Object(n.bb)(d),i=!1},d(t){t&&Object(n.u)(e),j&&j.d(),f&&f.d(t),d&&d.d(),t&&Object(n.u)(r),m&&m.d(t),t&&Object(n.u)(o)}}}function O(t,e,c){let{back:n}=e,{menu:b}=e,r=!1,{$$slots:o={},$$scope:s}=e;return t.$set=t=>{"back"in t&&c(0,n=t.back),"menu"in t&&c(1,b=t.menu),"$$scope"in t&&c(3,s=t.$$scope)},[n,b,r,s,o,()=>{c(2,r=!0)},()=>{c(2,r=!1)}]}class u extends n.a{constructor(t){super(),Object(n.F)(this,t,O,j,n.Q,{back:0,menu:1})}}e.a=u},256:function(t,e,c){"use strict";c.d(e,"b",(function(){return l})),c.d(e,"a",(function(){return a}));var n=c(9),b=c(59),r=c(261),o=c.n(r);async function s(){await b.b.loaded;let t=Object(n.b)(b.b);return t||(console.log("Fetching new Mattercloud API key"),t=await async function(){const t=await o.a.post("https://api.bitindex.network/api/v2/registration/account?secret=secretkey"),e=t.data&&t.data.apiKey;if(!e)throw new Error("Failed to request MatterCloud API key.");return e}(),b.b.set(t)),{baseURL:"https://api.mattercloud.net/api/v3/main",headers:{api_key:t}}}async function l(t){try{return(await o.a.post("/addrs/utxo",{addrs:t.toString()},await s())).data}catch(e){throw new Error(`Failed to retrieve utxo's for ${t}: ${e.message}`)}}async function a(t){try{const e=await o.a.post("/tx/send",{rawtx:t},await s());return e.data?e.data.txid:null}catch(t){throw new Error("Failed to broadcast transaction: "+t.message)}}},257:function(t,e,c){"use strict";async function n(t,e){const c=t.getReader(),n=new TextDecoder("utf-8");let b="";!async function t(){const{done:r,value:o}=await c.read();if(r)return;const s=n.decode(o).split("\n");s[0]=b+s[0],b=s.pop();for(const t of s){const c=JSON.parse(t);try{e(c)}catch(t){console.log("Failed to unpack message:",t)}}t()}()}c.d(e,"a",(function(){return n}))},258:function(t,e,c){"use strict";c.d(e,"b",(function(){return b})),c.d(e,"a",(function(){return r}));var n=c(9);const b=Object(n.c)([]),r=Object(n.a)(b,t=>t.reduce((t,e)=>t+e.satoshis,0))},292:function(t,e,c){"use strict";(function(t){c.d(e,"a",(function(){return a}));var n=c(16),b=c.n(n),r=c(9),o=c(258),s=c(20),l=c(256);async function a({data:e,to:c=[]}){const n=new b.a.Transaction;if(e&&e.length){const c=function(e){if("string"==typeof e)return b.a.Script.fromHex(e);const c=new b.a.Script;c.add(b.a.Opcode.OP_FALSE),c.add(b.a.Opcode.OP_RETURN);for(const n of e)"object"==typeof n&&n.hasOwnProperty("op")?c.add({opcodenum:n.op}):"string"==typeof n&&/^0x/i.test(n)?c.add(t.from(n.slice(2),"hex")):c.add(t.from(n));return c}(e);n.addOutput(new b.a.Transaction.Output({script:c,satoshis:0}))}n.feePerKb(1e3),c.forEach(t=>n.to(t.address,t.value)),await s.d.loaded;const a=Object(r.b)(s.d);if(!a)throw new Error("No seed loaded");const i=a.toAddress();if(n.change(i),Object(r.b)(o.a)<n.getFee()){console.log("fetching utxos: ");const t=await Object(l.b)(i);if(!t.length)throw new Error("No spedable UTXOs found.");o.b.set(t)}n.from(Object(r.b)(o.b)),n.sign(a);const j=n.outputs[1];return o.b.set([{txid:n.hash,outputIndex:1,vout:1,satoshis:j.satoshis,value:j.satoshis/1e3,script:j.script.toHex()}]),n}}).call(this,c(1).Buffer)},328:function(t,e,c){"use strict";c.r(e),c.d(e,"preload",(function(){return W}));var n=c(0),b=c(31),r=c(251),o=c(252);function s(t){let e,c;return{c(){e=Object(n.v)("span"),c=Object(n.Z)(t[4]),this.h()},l(b){e=Object(n.l)(b,"SPAN",{class:!0});var r=Object(n.j)(e);c=Object(n.n)(r,t[4]),r.forEach(n.u),this.h()},h(){Object(n.f)(e,"class","text-grey-300 smoltext svelte-epmb0l")},m(t,b){Object(n.G)(t,e,b),Object(n.d)(e,c)},p(t,e){16&e&&Object(n.S)(c,t[4])},d(t){t&&Object(n.u)(e)}}}function l(t){let e,c,b,r;const o=[i,a],s=[];function l(t,e){return t[2]?0:t[3]?1:-1}return~(e=l(t))&&(c=s[e]=o[e](t)),{c(){c&&c.c(),b=Object(n.w)()},l(t){c&&c.l(t),b=Object(n.w)()},m(t,c){~e&&s[e].m(t,c),Object(n.G)(t,b,c),r=!0},p(t,r){let a=e;e=l(t),e===a?~e&&s[e].p(t,r):(c&&(Object(n.E)(),Object(n.bb)(s[a],1,1,()=>{s[a]=null}),Object(n.i)()),~e?(c=s[e],c||(c=s[e]=o[e](t),c.c()),Object(n.ab)(c,1),c.m(b.parentNode,b)):c=null)},i(t){r||(Object(n.ab)(c),r=!0)},o(t){Object(n.bb)(c),r=!1},d(t){~e&&s[e].d(t),t&&Object(n.u)(b)}}}function a(t){let e;const c=new r.a({props:{class:"ml-1 text-grey smoltext",icon:o.c}});return{c(){Object(n.q)(c.$$.fragment)},l(t){Object(n.k)(c.$$.fragment,t)},m(t,b){Object(n.J)(c,t,b),e=!0},p:n.K,i(t){e||(Object(n.ab)(c.$$.fragment,t),e=!0)},o(t){Object(n.bb)(c.$$.fragment,t),e=!1},d(t){Object(n.s)(c,t)}}}function i(t){let e;const c=new r.a({props:{class:"ml-1 text-grey smoltext",icon:o.d}});return{c(){Object(n.q)(c.$$.fragment)},l(t){Object(n.k)(c.$$.fragment,t)},m(t,b){Object(n.J)(c,t,b),e=!0},p:n.K,i(t){e||(Object(n.ab)(c.$$.fragment,t),e=!0)},o(t){Object(n.bb)(c.$$.fragment,t),e=!1},d(t){Object(n.s)(c,t)}}}function j(t){let e,c,b,r,o,a,i,j,O,u,f,d,m=t[4]&&s(t),h=t[1]&&l(t);return{c(){e=Object(n.v)("div"),c=Object(n.v)("div"),r=Object(n.W)(),o=Object(n.v)("span"),a=Object(n.Z)(t[0]),j=Object(n.W)(),O=Object(n.v)("div"),m&&m.c(),u=Object(n.W)(),h&&h.c(),this.h()},l(b){e=Object(n.l)(b,"DIV",{class:!0});var s=Object(n.j)(e);c=Object(n.l)(s,"DIV",{class:!0}),Object(n.j)(c).forEach(n.u),r=Object(n.m)(s),o=Object(n.l)(s,"SPAN",{class:!0});var l=Object(n.j)(o);a=Object(n.n)(l,t[0]),l.forEach(n.u),j=Object(n.m)(s),O=Object(n.l)(s,"DIV",{class:!0});var i=Object(n.j)(O);m&&m.l(i),u=Object(n.m)(i),h&&h.l(i),i.forEach(n.u),s.forEach(n.u),this.h()},h(){Object(n.f)(c,"class",b="absolute bottom-0 "+(t[1]?"pointer-right":"pointer-left")+" svelte-epmb0l"),Object(n.f)(o,"class",i=t[1]?t[4]?"mr-10":"mr-2":t[4]?"mr-6":""),Object(n.f)(O,"class","absolute right-0 bottom-0 mr-2 mb-1 smoltext svelte-epmb0l"),Object(n.f)(e,"class",f="text-sm mx-3 bg-grey-800 max-w-md "+(t[1]?"text-left float-right rounded-l-lg":"text-left float-left rounded-r-lg")+"\n  text-white rounded-t-lg relative break-words bubble svelte-epmb0l")},m(t,b){Object(n.G)(t,e,b),Object(n.d)(e,c),Object(n.d)(e,r),Object(n.d)(e,o),Object(n.d)(o,a),Object(n.d)(e,j),Object(n.d)(e,O),m&&m.m(O,null),Object(n.d)(O,u),h&&h.m(O,null),d=!0},p(t,[r]){(!d||2&r&&b!==(b="absolute bottom-0 "+(t[1]?"pointer-right":"pointer-left")+" svelte-epmb0l"))&&Object(n.f)(c,"class",b),(!d||1&r)&&Object(n.S)(a,t[0]),(!d||18&r&&i!==(i=t[1]?t[4]?"mr-10":"mr-2":t[4]?"mr-6":""))&&Object(n.f)(o,"class",i),t[4]?m?m.p(t,r):(m=s(t),m.c(),m.m(O,u)):m&&(m.d(1),m=null),t[1]?h?(h.p(t,r),Object(n.ab)(h,1)):(h=l(t),h.c(),Object(n.ab)(h,1),h.m(O,null)):h&&(Object(n.E)(),Object(n.bb)(h,1,1,()=>{h=null}),Object(n.i)()),(!d||2&r&&f!==(f="text-sm mx-3 bg-grey-800 max-w-md "+(t[1]?"text-left float-right rounded-l-lg":"text-left float-left rounded-r-lg")+"\n  text-white rounded-t-lg relative break-words bubble svelte-epmb0l"))&&Object(n.f)(e,"class",f)},i(t){d||(Object(n.ab)(h),d=!0)},o(t){Object(n.bb)(h),d=!1},d(t){t&&Object(n.u)(e),m&&m.d(),h&&h.d()}}}function O(t,e,c){let n,{text:b}=e,{sendByMe:r}=e,{mempool:o}=e,{broadcast:s}=e,{timestamp:l}=e,{block:a}=e;return t.$set=t=>{"text"in t&&c(0,b=t.text),"sendByMe"in t&&c(1,r=t.sendByMe),"mempool"in t&&c(2,o=t.mempool),"broadcast"in t&&c(3,s=t.broadcast),"timestamp"in t&&c(5,l=t.timestamp),"block"in t&&c(6,a=t.block)},t.$$.update=()=>{32&t.$$.dirty&&c(4,n=l?function(t){const e=((new Date).getTime()-t.getTime())/1e3;if(e<60)return"now";if(e<3600)return parseInt(e/60)+"m";if(e<=86400)return parseInt(e/3600)+"h";if(e>86400){return t.getDate()+" "+t.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ","")}}(new Date(l)):void 0)},[b,r,o,s,n,l,a]}class u extends n.a{constructor(t){var e;super(),document.getElementById("svelte-epmb0l-style")||((e=Object(n.v)("style")).id="svelte-epmb0l-style",e.textContent=".pointer-right.svelte-epmb0l{border-right:0.5rem solid transparent;border-top:0.5rem solid transparent;border-left:0.5rem solid #424242;border-bottom:0.5rem solid #424242;right:-0.5rem}.pointer-left.svelte-epmb0l{border-left:0.5rem solid transparent;border-top:0.5rem solid transparent;border-right:0.5rem solid #424242;border-bottom:0.5rem solid #424242;left:-0.5rem}.bubble.svelte-epmb0l{padding:0.5rem 0.75rem;min-width:0}.smoltext.svelte-epmb0l{font-size:0.5rem}",Object(n.d)(document.head,e)),Object(n.F)(this,t,O,j,n.Q,{text:0,sendByMe:1,mempool:2,broadcast:3,timestamp:5,block:6})}}var f=u;function d(t){let e,c,b,s,l,a;const i=new r.a({props:{icon:o.f,class:"text-grey"}});return{c(){e=Object(n.v)("div"),c=Object(n.v)("div"),b=Object(n.W)(),s=Object(n.v)("button"),Object(n.q)(i.$$.fragment),this.h()},l(t){e=Object(n.l)(t,"DIV",{class:!0});var r=Object(n.j)(e);c=Object(n.l)(r,"DIV",{contenteditable:!0,class:!0}),Object(n.j)(c).forEach(n.u),b=Object(n.m)(r),s=Object(n.l)(r,"BUTTON",{class:!0});var o=Object(n.j)(s);Object(n.k)(i.$$.fragment,o),o.forEach(n.u),r.forEach(n.u),this.h()},h(){Object(n.f)(c,"contenteditable","true"),Object(n.f)(c,"class","flex-grow min-h-8 text-white p-2 bg-grey-800 focus:outline-none\n    align-middle overflow-x-hidden"),void 0===t[0]&&Object(n.b)(()=>t[6].call(c)),Object(n.f)(s,"class","w-16 flex-shrink-0 bg-grey-900"),Object(n.f)(e,"class","flex max-w-full ")},m(r,o,j){Object(n.G)(r,e,o),Object(n.d)(e,c),t[5](c),void 0!==t[0]&&(c.innerHTML=t[0]),Object(n.d)(e,b),Object(n.d)(e,s),Object(n.J)(i,s,null),l=!0,j&&Object(n.P)(a),a=[Object(n.I)(c,"input",t[6]),Object(n.I)(c,"keydown",t[3]),Object(n.I)(s,"click",t[2])]},p(t,[e]){1&e&&t[0]!==c.innerHTML&&(c.innerHTML=t[0])},i(t){l||(Object(n.ab)(i.$$.fragment,t),l=!0)},o(t){Object(n.bb)(i.$$.fragment,t),l=!1},d(c){c&&Object(n.u)(e),t[5](null),Object(n.s)(i),Object(n.P)(a)}}}function m(t,e,c){const r=Object(b.c)();let o,s;function l(){o&&(r("send",{text:o}),c(0,o=""))}return Object(b.f)(()=>{s.focus()}),[o,s,l,function(t){13===t.which&&(t.preventDefault(),l())},r,function(t){n.h[t?"unshift":"push"](()=>{c(1,s=t)})},function(){o=this.innerHTML,c(0,o)}]}class h extends n.a{constructor(t){super(),Object(n.F)(this,t,m,d,n.Q,{})}}var p=h,g=c(256),$=c(20),w=c(47),v=c(292);c(13);function x(t){let e,c,b;Object(n.b)(t[10]);const r=t[9].default,o=Object(n.r)(r,t,t[8],null);return{c(){e=Object(n.v)("div"),o&&o.c(),this.h()},l(t){e=Object(n.l)(t,"DIV",{class:!0});var c=Object(n.j)(e);o&&o.l(c),c.forEach(n.u),this.h()},h(){Object(n.f)(e,"class","scroller flex-auto svelte-117hz7i")},m(r,s,l){Object(n.G)(r,e,s),o&&o.m(e,null),t[11](e),c=!0,l&&Object(n.P)(b),b=[Object(n.I)(window,"resize",t[10]),Object(n.I)(e,"scroll",t[2])]},p(t,[e]){o&&o.p&&256&e&&o.p(Object(n.A)(r,t,t[8],null),Object(n.z)(r,t[8],e,null))},i(t){c||(Object(n.ab)(o,t),c=!0)},o(t){Object(n.bb)(o,t),c=!1},d(c){c&&Object(n.u)(e),o&&o.d(c),t[11](null),Object(n.P)(b)}}}function y(t,e,c){const r=Object(b.c)();let o,s,l,a={},i=!1,j=0;Object(b.b)(()=>{a?(j=a.scrollHeight,i=a.offsetHeight+a.scrollTop>a.scrollHeight-20):i=!0}),Object(b.a)(()=>{i?a.scrollTo(0,a.scrollHeight):o&&a.scrollTo(0,a.scrollTop+(a.scrollHeight-j)),o=!1}),Object(b.f)(async()=>{c(0,a.scrollTop=a.scrollHeight,a)});let{$$slots:O={},$$scope:u}=e;return t.$set=t=>{"$$scope"in t&&c(8,u=t.$$scope)},t.$$.update=()=>{67&t.$$.dirty&&(l&&c(0,a.scrollTop-=s-l,a),c(6,l=s))},[a,s,function(t){t.target.scrollTop<=300&&(o=!0,r("loadMore"))},i,j,o,l,r,u,O,function(){c(1,s=window.innerHeight)},function(t){n.h[t?"unshift":"push"](()=>{c(0,a=t)})}]}class k extends n.a{constructor(t){var e;super(),document.getElementById("svelte-117hz7i-style")||((e=Object(n.v)("style")).id="svelte-117hz7i-style",e.textContent=".scroller.svelte-117hz7i{height:100vh;overflow-y:auto;-webkit-overflow-scrolling:touch}",Object(n.d)(document.head,e)),Object(n.F)(this,t,y,x,n.Q,{})}}var E=k,I=c(77),T=c(257),G=(c(9),c(250)),D=c(78),S=c(16),H=c.n(S),M=c(75),J=c.n(M),P=c(129);function A(t,e,c){const n=t.slice();return n[14]=e[c].sender,n[0]=e[c].recipient,n[15]=e[c].text,n[16]=e[c].mempool,n[17]=e[c].broadcast,n[18]=e[c].timestamp,n[19]=e[c].blk,n[21]=c,n}function B(t){let e,c,b;return{c(){e=Object(n.Z)(t[0]),c=Object(n.W)(),b=Object(n.v)("div"),this.h()},l(r){e=Object(n.n)(r,t[0]),c=Object(n.m)(r),b=Object(n.l)(r,"DIV",{class:!0}),Object(n.j)(b).forEach(n.u),this.h()},h(){Object(n.f)(b,"class","flex-grow")},m(t,r){Object(n.G)(t,e,r),Object(n.G)(t,c,r),Object(n.G)(t,b,r)},p(t,c){1&c&&Object(n.S)(e,t[0])},d(t){t&&Object(n.u)(e),t&&Object(n.u)(c),t&&Object(n.u)(b)}}}function F(t){let e,c,b,r;const o=new f({props:{sendByMe:t[14]==t[2],text:t[15],mempool:t[16],broadcast:t[17],timestamp:t[18],block:t[19]}});return{c(){e=Object(n.v)("div"),Object(n.q)(o.$$.fragment),c=Object(n.W)(),this.h()},l(t){e=Object(n.l)(t,"DIV",{class:!0,style:!0});var b=Object(n.j)(e);Object(n.k)(o.$$.fragment,b),c=Object(n.m)(b),b.forEach(n.u),this.h()},h(){Object(n.f)(e,"class",b="flex "+(t[14]==t[2]?"flex-row-reverse":"flex-row")),Object(n.V)(e,"margin","0.5rem")},m(t,b){Object(n.G)(t,e,b),Object(n.J)(o,e,null),Object(n.d)(e,c),r=!0},p(t,c){const s={};6&c&&(s.sendByMe=t[14]==t[2]),2&c&&(s.text=t[15]),2&c&&(s.mempool=t[16]),2&c&&(s.broadcast=t[17]),2&c&&(s.timestamp=t[18]),2&c&&(s.block=t[19]),o.$set(s),(!r||6&c&&b!==(b="flex "+(t[14]==t[2]?"flex-row-reverse":"flex-row")))&&Object(n.f)(e,"class",b)},i(t){r||(Object(n.ab)(o.$$.fragment,t),r=!0)},o(t){Object(n.bb)(o.$$.fragment,t),r=!1},d(t){t&&Object(n.u)(e),Object(n.s)(o)}}}function N(t){let e,c,b=t[1],r=[];for(let e=0;e<b.length;e+=1)r[e]=F(A(t,b,e));const o=t=>Object(n.bb)(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=Object(n.w)()},l(t){for(let e=0;e<r.length;e+=1)r[e].l(t);e=Object(n.w)()},m(t,b){for(let e=0;e<r.length;e+=1)r[e].m(t,b);Object(n.G)(t,e,b),c=!0},p(t,c){if(6&c){let s;for(b=t[1],s=0;s<b.length;s+=1){const o=A(t,b,s);r[s]?(r[s].p(o,c),Object(n.ab)(r[s],1)):(r[s]=F(o),r[s].c(),Object(n.ab)(r[s],1),r[s].m(e.parentNode,e))}for(Object(n.E)(),s=b.length;s<r.length;s+=1)o(s);Object(n.i)()}},i(t){if(!c){for(let t=0;t<b.length;t+=1)Object(n.ab)(r[t]);c=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Object(n.bb)(r[t]);c=!1},d(t){Object(n.t)(r,t),t&&Object(n.u)(e)}}}function V(t){let e,c,b;const r=new G.a({props:{back:"/",$$slots:{default:[B]},$$scope:{ctx:t}}}),o=new E({props:{$$slots:{default:[N]},$$scope:{ctx:t}}});o.$on("loadMore",q);const s=new p({});return s.$on("send",t[3]),{c(){Object(n.q)(r.$$.fragment),e=Object(n.W)(),Object(n.q)(o.$$.fragment),c=Object(n.W)(),Object(n.q)(s.$$.fragment)},l(t){Object(n.k)(r.$$.fragment,t),e=Object(n.m)(t),Object(n.k)(o.$$.fragment,t),c=Object(n.m)(t),Object(n.k)(s.$$.fragment,t)},m(t,l){Object(n.J)(r,t,l),Object(n.G)(t,e,l),Object(n.J)(o,t,l),Object(n.G)(t,c,l),Object(n.J)(s,t,l),b=!0},p(t,[e]){const c={};4194305&e&&(c.$$scope={dirty:e,ctx:t}),r.$set(c);const n={};4194310&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){b||(Object(n.ab)(r.$$.fragment,t),Object(n.ab)(o.$$.fragment,t),Object(n.ab)(s.$$.fragment,t),b=!0)},o(t){Object(n.bb)(r.$$.fragment,t),Object(n.bb)(o.$$.fragment,t),Object(n.bb)(s.$$.fragment,t),b=!1},d(t){Object(n.s)(r,t),t&&Object(n.u)(e),Object(n.s)(o,t),t&&Object(n.u)(c),Object(n.s)(s,t)}}}async function W(t,e){return t.params}async function q(){console.log("loading")}function z(t,e,c){let r,o,s,l,a;Object(n.o)(t,w.c,t=>c(4,r=t)),Object(n.o)(t,$.e,t=>c(2,o=t)),Object(n.o)(t,$.d,t=>c(8,s=t)),Object(n.o)(t,$.c,t=>c(9,l=t)),Object(n.o)(t,$.f,t=>c(10,a=t));let i,j,O,u,{recipient:f}=e;return Object(b.f)(async()=>{await $.a.loaded;const t=await Object(I.b)(u);Object(T.a)(t,t=>w.b.put(Object(I.c)(t)));const e=await Object(I.a)(u);Object(T.a)(e,t=>w.b.put(Object(I.c)(t)))}),t.$set=t=>{"recipient"in t&&c(0,f=t.recipient)},t.$$.update=()=>{21&t.$$.dirty&&c(1,i=r.filter(t=>t.recipient===f&&t.sender===o||t.sender===f&&t.recipient===o)),1&t.$$.dirty&&(j=J()().publicKey(H.a.PublicKey.fromString(f))),5&t.$$.dirty&&c(6,O={q:{find:{"out.s2":D.a.message,$or:[{"out.s3":o,"out.s4":f},{"out.s3":f,"out.s4":o}]},project:{blk:1,"tx.h":1,"out.s3":1,"out.s4":1,"out.s5":1,"out.s6":1,"out.s7":1,"out.o1":1,"in.e":1,timestamp:1,"blk.i":1},limit:200}}),64&t.$$.dirty&&(u=JSON.stringify(O))},[f,i,o,async function(t){const e=t.detail.text;await $.d.loaded;const c=P.sign(e,s),n=j.encrypt(e).toString("hex"),b=l.encrypt(e).toString("hex"),r=[D.a.message,a.toString(),f,n,b,c],o=await Object(v.a)({data:r}),i={txid:o.hash,recipient:f,sender:a.toString(),text:e,signature:c,broadcast:!1,mempool:!1,timestamp:Date.now()};w.b.put(i),await Object(g.a)(o.serialize()),w.b.put({...i,broadcast:!0})}]}class K extends n.a{constructor(t){super(),Object(n.F)(this,t,z,V,n.Q,{recipient:0})}}e.default=K}}]);